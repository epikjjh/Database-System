cscope 15 $HOME/mysql/Lab/bpt/src -q 0000000232 0000050771
	@bpt.c

4 
	#Vîsi⁄
 "1.14"

	)

55 
	~"b±.h
"

69 
	g‹dî
 = 
DEFAULT_ORDER
;

70 
	gÀaf_‹dî
 = 32;

71 
	göã∫Æ_‹dî
 = 249;

78 
node
 * 
	gqueue
 = 
NULL
;

85 
boﬁ
 
	gvîbo£_ouçut
 = 
Ál£
;

90 
FILE
 *
	gÂ
;

91 
	gfd
;

97 
öt64_t
 
	gdeÁu…_off£t
;

103 
∑ge_li°
 *
	ghód
 = 
NULL
;

106 
öt64_t
 
ö£π_öto_∑ª¡_∑ge
(öt64_à
Ω_off£t
, i¡64_à
l_off£t
, i¡64_à
key
, i¡64_à
r_off£t
);

108 
öt64_t
 
ö£π_öto_√w_roŸ_∑ge
(öt64_à
l_off£t
, i¡64_à
key
, i¡64_à
r_off£t
);

110 
öt64_t
 
föd_Àaf_∑ge
(öt64_à
Ω_off£t
, i¡64_à
key
);

112 * 
föd
(
öt64_t
 
key
);

120 
	$li˚n£_nŸi˚
( ) {

121 
	`¥ötf
("bpt version %s -- Copyright (C) 2010 Amittai Aviram "

122 "hâp://www.amôèi.com\n", 
Vîsi⁄
);

123 
	`¥ötf
("ThisÖrogram comes with ABSOLUTELY NO WARRANTY; for details "

127 
	}
}

132 
	$¥öt_li˚n£
–
li˚n£_∑π
 ) {

133 
°¨t
, 
íd
, 
löe
;

134 
FILE
 * 
Â
;

135 
buf„r
[0x100];

137 
li˚n£_∑π
) {

138 
LICENSE_WARRANTEE
:

139 
°¨t
 = 
LICENSE_WARRANTEE_START
;

140 
íd
 = 
LICENSE_WARRANTEE_END
;

142 
LICENSE_CONDITIONS
:

143 
°¨t
 = 
LICENSE_CONDITIONS_START
;

144 
íd
 = 
LICENSE_CONDITIONS_END
;

150 
Â
 = 
	`f›í
(
LICENSE_FILE
, "r");

151 i‡(
Â
 =
NULL
) {

152 
	`≥º‹
("print_license: fopen");

153 
	`exô
(
EXIT_FAILURE
);

155 
löe
 = 0;Üöê< 
°¨t
;Üine++)

156 
	`fgës
(
buf„r
, (buf„r), 
Â
);

157  ; 
löe
 < 
íd
;Üine++) {

158 
	`fgës
(
buf„r
, (buf„r), 
Â
);

159 
	`¥ötf
("%s", 
buf„r
);

161 
	`f˛o£
(
Â
);

162 
	}
}

167 
	$ußge_1
( ) {

168 
	`¥ötf
("B+ Tªêo‡Ordî %d.\n", 
‹dî
);

169 
	`¥ötf
("Following Silberschatz, Korth, Sidarshan, Database Concepts, "

174 
	`¥ötf
("(%d <‹dî <%d).\n", 
MIN_ORDER
, 
MAX_ORDER
);

175 
	`¥ötf
("To start with input fromá file ofÇewline-delimited integers, \n"

178 
	}
}

183 
	$ußge_2
( ) {

184 
	`¥ötf
("Enterány ofÅhe following commandsáfterÅheÖrompt > :\n"

200 
	}
}

205 
	$ußge_3
( ) {

206 
	`¥ötf
("Usage: ./bpt [<order>]\n");

207 
	`¥ötf
("\twhîê%d <‹dî <%d .\n", 
MIN_ORDER
, 
MAX_ORDER
);

208 
	}
}

214 
	$íqueue
–
node
 * 
√w_node
 ) {

215 
node
 * 
c
;

216 i‡(
queue
 =
NULL
) {

217 
queue
 = 
√w_node
;

218 
queue
->
√xt
 = 
NULL
;

221 
c
 = 
queue
;

222 
c
->
√xt
 !
NULL
) {

223 
c
 = c->
√xt
;

225 
c
->
√xt
 = 
√w_node
;

226 
√w_node
->
√xt
 = 
NULL
;

228 
	}
}

234 
node
 * 
	$dequeue
( ) {

235 
node
 * 
n
 = 
queue
;

236 
queue
 = queue->
√xt
;

237 
n
->
√xt
 = 
NULL
;

238  
n
;

239 
	}
}

246 
	$¥öt_Àaves
–
node
 * 
roŸ
 ) {

247 
i
;

248 
node
 * 
c
 = 
roŸ
;

249 i‡(
roŸ
 =
NULL
) {

250 
	`¥ötf
("EmptyÅree.\n");

253 !
c
->
is_Àaf
)

254 
c
 = c->
poöãrs
[0];

255 
åue
) {

256 
i
 = 0; i < 
c
->
num_keys
; i++) {

257 i‡(
vîbo£_ouçut
)

258 
	`¥ötf
("%lx ", ()
c
->
poöãrs
[
i
]);

259 
	`¥ötf
("%d ", 
c
->
keys
[
i
]);

261 i‡(
vîbo£_ouçut
)

262 
	`¥ötf
("%lx ", ()
c
->
poöãrs
[
‹dî
 - 1]);

263 i‡(
c
->
poöãrs
[
‹dî
 - 1] !
NULL
) {

264 
	`¥ötf
(" | ");

265 
c
 = c->
poöãrs
[
‹dî
 - 1];

270 
	`¥ötf
("\n");

271 
	}
}

278 
	$height
–
node
 * 
roŸ
 ) {

279 
h
 = 0;

280 
node
 * 
c
 = 
roŸ
;

281 !
c
->
is_Àaf
) {

282 
c
 = c->
poöãrs
[0];

283 
h
++;

285  
h
;

286 
	}
}

292 
	$∑th_to_roŸ
–
node
 * 
roŸ
,Çodê* 
chûd
 ) {

293 
Àngth
 = 0;

294 
node
 * 
c
 = 
chûd
;

295 
c
 !
roŸ
) {

296 
c
 = c->
∑ª¡
;

297 
Àngth
++;

299  
Àngth
;

300 
	}
}

312 
	$¥öt_åì
–
node
 * 
roŸ
 ) {

314 
node
 * 
n
 = 
NULL
;

315 
i
 = 0;

316 
ønk
 = 0;

317 
√w_ønk
 = 0;

319 i‡(
roŸ
 =
NULL
) {

320 
	`¥ötf
("EmptyÅree.\n");

323 
queue
 = 
NULL
;

324 
	`íqueue
(
roŸ
);

325  
queue
 !
NULL
 ) {

326 
n
 = 
	`dequeue
();

327 i‡(
n
->
∑ª¡
 !
NULL
 &&Ç =n->∑ª¡->
poöãrs
[0]) {

328 
√w_ønk
 = 
	`∑th_to_roŸ
–
roŸ
, 
n
 );

329 i‡(
√w_ønk
 !
ønk
) {

330 
ønk
 = 
√w_ønk
;

331 
	`¥ötf
("\n");

334 i‡(
vîbo£_ouçut
)

335 
	`¥ötf
("(%lx)", ()
n
);

336 
i
 = 0; i < 
n
->
num_keys
; i++) {

337 i‡(
vîbo£_ouçut
)

338 
	`¥ötf
("%lx ", ()
n
->
poöãrs
[
i
]);

339 
	`¥ötf
("%d ", 
n
->
keys
[
i
]);

341 i‡(!
n
->
is_Àaf
)

342 
i
 = 0; i <
n
->
num_keys
; i++)

343 
	`íqueue
(
n
->
poöãrs
[
i
]);

344 i‡(
vîbo£_ouçut
) {

345 i‡(
n
->
is_Àaf
)

346 
	`¥ötf
("%lx ", ()
n
->
poöãrs
[
‹dî
 - 1]);

348 
	`¥ötf
("%lx ", ()
n
->
poöãrs
[n->
num_keys
]);

350 
	`¥ötf
("| ");

352 
	`¥ötf
("\n");

353 
	}
}

359 
	$föd_™d_¥öt
(
node
 * 
roŸ
, 
key
, 
boﬁ
 
vîbo£
) {

360 
ªc‹d
 * 
r
 = 
	`föd_åì
(
roŸ
, 
key
, 
vîbo£
);

361 i‡(
r
 =
NULL
)

362 
	`¥ötf
("Rec‹dÇŸ found undî key %d.\n", 
key
);

364 
	`¥ötf
("Recordát %lx -- key %d, value %s.\n",

365 ()
r
, 
key
,Ñ->
vÆue
);

366 
	}
}

372 
	$föd_™d_¥öt_ønge
–
node
 * 
roŸ
, 
key_°¨t
, 
key_íd
,

373 
boﬁ
 
vîbo£
 ) {

374 
i
;

375 
¨øy_size
 = 
key_íd
 - 
key_°¨t
 + 1;

376 
ªtu∫ed_keys
[
¨øy_size
];

377 * 
ªtu∫ed_poöãrs
[
¨øy_size
];

378 
num_found
 = 
	`föd_ønge
–
roŸ
, 
key_°¨t
, 
key_íd
, 
vîbo£
,

379 
ªtu∫ed_keys
, 
ªtu∫ed_poöãrs
 );

380 i‡(!
num_found
)

381 
	`¥ötf
("None found.\n");

383 
i
 = 0; i < 
num_found
; i++)

384 
	`¥ötf
("Key: %d Location: %lx Value: %s\n",

385 
ªtu∫ed_keys
[
i
],

386 ()
ªtu∫ed_poöãrs
[
i
],

387 ((
ªc‹d
 *)

388 
ªtu∫ed_poöãrs
[
i
])->
vÆue
);

390 
	}
}

398 
	$föd_ønge
–
node
 * 
roŸ
, 
key_°¨t
, 
key_íd
, 
boﬁ
 
vîbo£
,

399 
ªtu∫ed_keys
[], * 
ªtu∫ed_poöãrs
[]) {

400 
i
, 
num_found
;

401 
num_found
 = 0;

402 
node
 * 
n
 = 
	`föd_Àaf
–
roŸ
, 
key_°¨t
, 
vîbo£
 );

403 i‡(
n
 =
NULL
)  0;

404 
i
 = 0; i < 
n
->
num_keys
 &&Ç->
keys
[i] < 
key_°¨t
; i++) ;

405 i‡(
i
 =
n
->
num_keys
)  0;

406 
n
 !
NULL
) {

407  ; 
i
 < 
n
->
num_keys
 &&Ç->
keys
[i] <
key_íd
; i++) {

408 
ªtu∫ed_keys
[
num_found
] = 
n
->
keys
[
i
];

409 
ªtu∫ed_poöãrs
[
num_found
] = 
n
->
poöãrs
[
i
];

410 
num_found
++;

412 
n
 =Ç->
poöãrs
[
‹dî
 - 1];

413 
i
 = 0;

415  
num_found
;

416 
	}
}

424 
node
 * 
	$föd_Àaf
–
node
 * 
roŸ
, 
key
, 
boﬁ
 
vîbo£
 ) {

425 
i
 = 0;

426 
node
 * 
c
 = 
roŸ
;

427 i‡(
c
 =
NULL
) {

428 i‡(
vîbo£
)

429 
	`¥ötf
("EmptyÅree.\n");

430  
c
;

432 !
c
->
is_Àaf
) {

433 i‡(
vîbo£
) {

434 
	`¥ötf
("[");

435 
i
 = 0; i < 
c
->
num_keys
 - 1; i++)

436 
	`¥ötf
("%d ", 
c
->
keys
[
i
]);

437 
	`¥ötf
("%d] ", 
c
->
keys
[
i
]);

439 
i
 = 0;

440 
i
 < 
c
->
num_keys
) {

441 i‡(
key
 >
c
->
keys
[
i
]) i++;

444 i‡(
vîbo£
)

445 
	`¥ötf
("%d ->\n", 
i
);

446 
c
 = (
node
 *)c->
poöãrs
[
i
];

448 i‡(
vîbo£
) {

449 
	`¥ötf
("Leaf [");

450 
i
 = 0; i < 
c
->
num_keys
 - 1; i++)

451 
	`¥ötf
("%d ", 
c
->
keys
[
i
]);

452 
	`¥ötf
("%d] ->\n", 
c
->
keys
[
i
]);

454  
c
;

455 
	}
}

461 
ªc‹d
 * 
	$föd_åì
–
node
 * 
roŸ
, 
key
, 
boﬁ
 
vîbo£
 ) {

462 
i
 = 0;

463 
node
 * 
c
 = 
	`föd_Àaf
–
roŸ
, 
key
, 
vîbo£
 );

464 i‡(
c
 =
NULL
)  NULL;

465 
i
 = 0; i < 
c
->
num_keys
; i++)

466 i‡(
c
->
keys
[
i
] =
key
) ;

467 i‡(
i
 =
c
->
num_keys
)

468  
NULL
;

470  (
ªc‹d
 *)
c
->
poöãrs
[
i
];

471 
	}
}

476 
	$cut
–
Àngth
 ) {

477 i‡(
Àngth
 % 2 == 0)

478  
Àngth
/2;

480  
Àngth
/2 + 1;

481 
	}
}

489 
ªc‹d
 * 
	$make_ªc‹d
(
vÆue
[]) {

490 
ªc‹d
 * 
√w_ªc‹d
 = (ªc‹d *)
	`mÆloc
((record));

491 i‡(
√w_ªc‹d
 =
NULL
) {

492 
	`≥º‹
("Record creation.");

493 
	`exô
(
EXIT_FAILURE
);

496 
	`°r˝y
(
√w_ªc‹d
->
vÆue
,value);

498  
√w_ªc‹d
;

499 
	}
}

505 
node
 * 
	$make_node
( ) {

506 
node
 * 
√w_node
;

507 
√w_node
 = 
	`mÆloc
((
node
));

508 i‡(
√w_node
 =
NULL
) {

509 
	`≥º‹
("Node creation.");

510 
	`exô
(
EXIT_FAILURE
);

512 
√w_node
->
keys
 = 
	`mÆloc
–(
‹dî
 - 1) * () );

513 i‡(
√w_node
->
keys
 =
NULL
) {

514 
	`≥º‹
("NewÇode keysárray.");

515 
	`exô
(
EXIT_FAILURE
);

517 
√w_node
->
poöãrs
 = 
	`mÆloc
–
‹dî
 * (*) );

518 i‡(
√w_node
->
poöãrs
 =
NULL
) {

519 
	`≥º‹
("NewÇodeÖointersárray.");

520 
	`exô
(
EXIT_FAILURE
);

522 
√w_node
->
is_Àaf
 = 
Ál£
;

523 
√w_node
->
num_keys
 = 0;

524 
√w_node
->
∑ª¡
 = 
NULL
;

525 
√w_node
->
√xt
 = 
NULL
;

526  
√w_node
;

527 
	}
}

532 
node
 * 
	$make_Àaf
( ) {

533 
node
 * 
Àaf
 = 
	`make_node
();

534 
Àaf
->
is_Àaf
 = 
åue
;

535  
Àaf
;

536 
	}
}

543 
	$gë_À·_ödex
(
node
 * 
∑ª¡
,Çodê* 
À·
) {

545 
À·_ödex
 = 0;

546 
À·_ödex
 <
∑ª¡
->
num_keys
 &&

547 
∑ª¡
->
poöãrs
[
À·_ödex
] !
À·
)

548 
À·_ödex
++;

549  
À·_ödex
;

550 
	}
}

556 
node
 * 
	$ö£π_öto_Àaf
–
node
 * 
Àaf
, 
key
, 
ªc‹d
 * 
poöãr
 ) {

558 
i
, 
ö£πi⁄_poöt
;

560 
ö£πi⁄_poöt
 = 0;

561 
ö£πi⁄_poöt
 < 
Àaf
->
num_keys
 &&Üóf->
keys
[ö£πi⁄_poöt] < 
key
)

562 
ö£πi⁄_poöt
++;

564 
i
 = 
Àaf
->
num_keys
; i > 
ö£πi⁄_poöt
; i--) {

565 
Àaf
->
keys
[
i
] =Üeaf->keys[i - 1];

566 
Àaf
->
poöãrs
[
i
] =Üeaf->pointers[i - 1];

568 
Àaf
->
keys
[
ö£πi⁄_poöt
] = 
key
;

569 
Àaf
->
poöãrs
[
ö£πi⁄_poöt
] = 
poöãr
;

570 
Àaf
->
num_keys
++;

571  
Àaf
;

572 
	}
}

580 
node
 * 
	$ö£π_öto_Àaf_a·î_•lôtög
(
node
 * 
roŸ
,Çodê* 
Àaf
, 
key
, 
ªc‹d
 * 
poöãr
) {

582 
node
 * 
√w_Àaf
;

583 * 
ãmp_keys
;

584 ** 
ãmp_poöãrs
;

585 
ö£πi⁄_ödex
, 
•lô
, 
√w_key
, 
i
, 
j
;

587 
√w_Àaf
 = 
	`make_Àaf
();

589 
ãmp_keys
 = 
	`mÆloc
–
‹dî
 * () );

590 i‡(
ãmp_keys
 =
NULL
) {

591 
	`≥º‹
("Temporary keysárray.");

592 
	`exô
(
EXIT_FAILURE
);

595 
ãmp_poöãrs
 = 
	`mÆloc
–
‹dî
 * (*) );

596 i‡(
ãmp_poöãrs
 =
NULL
) {

597 
	`≥º‹
("TemporaryÖointersárray.");

598 
	`exô
(
EXIT_FAILURE
);

601 
ö£πi⁄_ödex
 = 0;

602 
ö£πi⁄_ödex
 < 
‹dî
 - 1 && 
Àaf
->
keys
[ö£πi⁄_ödex] < 
key
)

603 
ö£πi⁄_ödex
++;

605 
i
 = 0, 
j
 = 0; i < 
Àaf
->
num_keys
; i++, j++) {

606 i‡(
j
 =
ö£πi⁄_ödex
) j++;

607 
ãmp_keys
[
j
] = 
Àaf
->
keys
[
i
];

608 
ãmp_poöãrs
[
j
] = 
Àaf
->
poöãrs
[
i
];

611 
ãmp_keys
[
ö£πi⁄_ödex
] = 
key
;

612 
ãmp_poöãrs
[
ö£πi⁄_ödex
] = 
poöãr
;

614 
Àaf
->
num_keys
 = 0;

616 
•lô
 = 
	`cut
(
‹dî
 - 1);

618 
i
 = 0; i < 
•lô
; i++) {

619 
Àaf
->
poöãrs
[
i
] = 
ãmp_poöãrs
[i];

620 
Àaf
->
keys
[
i
] = 
ãmp_keys
[i];

621 
Àaf
->
num_keys
++;

624 
i
 = 
•lô
, 
j
 = 0; i < 
‹dî
; i++, j++) {

625 
√w_Àaf
->
poöãrs
[
j
] = 
ãmp_poöãrs
[
i
];

626 
√w_Àaf
->
keys
[
j
] = 
ãmp_keys
[
i
];

627 
√w_Àaf
->
num_keys
++;

630 
	`‰ì
(
ãmp_poöãrs
);

631 
	`‰ì
(
ãmp_keys
);

633 
√w_Àaf
->
poöãrs
[
‹dî
 - 1] = 
Àaf
->pointers[order - 1];

634 
Àaf
->
poöãrs
[
‹dî
 - 1] = 
√w_Àaf
;

636 
i
 = 
Àaf
->
num_keys
; i < 
‹dî
 - 1; i++)

637 
Àaf
->
poöãrs
[
i
] = 
NULL
;

638 
i
 = 
√w_Àaf
->
num_keys
; i < 
‹dî
 - 1; i++)

639 
√w_Àaf
->
poöãrs
[
i
] = 
NULL
;

641 
√w_Àaf
->
∑ª¡
 = 
Àaf
->parent;

642 
√w_key
 = 
√w_Àaf
->
keys
[0];

644  
	`ö£π_öto_∑ª¡
(
roŸ
, 
Àaf
, 
√w_key
, 
√w_Àaf
);

645 
	}
}

652 
node
 * 
	$ö£π_öto_node
(
node
 * 
roŸ
,Çodê* 
n
,

653 
À·_ödex
, 
key
, 
node
 * 
right
) {

654 
i
;

656 
i
 = 
n
->
num_keys
; i > 
À·_ödex
; i--) {

657 
n
->
poöãrs
[
i
 + 1] =Ç->pointers[i];

658 
n
->
keys
[
i
] =Ç->keys[i - 1];

660 
n
->
poöãrs
[
À·_ödex
 + 1] = 
right
;

661 
n
->
keys
[
À·_ödex
] = 
key
;

662 
n
->
num_keys
++;

663  
roŸ
;

664 
	}
}

671 
node
 * 
	$ö£π_öto_node_a·î_•lôtög
(
node
 * 
roŸ
,Çodê* 
ﬁd_node
, 
À·_ödex
,

672 
key
, 
node
 * 
right
) {

674 
i
, 
j
, 
•lô
, 
k_¥ime
;

675 
node
 * 
√w_node
, * 
chûd
;

676 * 
ãmp_keys
;

677 
node
 ** 
ãmp_poöãrs
;

688 
ãmp_poöãrs
 = 
	`mÆloc
–(
‹dî
 + 1Ë* (
node
 *) );

689 i‡(
ãmp_poöãrs
 =
NULL
) {

690 
	`≥º‹
("TemporaryÖointersárray for splittingÇodes.");

691 
	`exô
(
EXIT_FAILURE
);

693 
ãmp_keys
 = 
	`mÆloc
–
‹dî
 * () );

694 i‡(
ãmp_keys
 =
NULL
) {

695 
	`≥º‹
("Temporary keysárray for splittingÇodes.");

696 
	`exô
(
EXIT_FAILURE
);

699 
i
 = 0, 
j
 = 0; i < 
ﬁd_node
->
num_keys
 + 1; i++, j++) {

700 i‡(
j
 =
À·_ödex
 + 1) j++;

701 
ãmp_poöãrs
[
j
] = 
ﬁd_node
->
poöãrs
[
i
];

704 
i
 = 0, 
j
 = 0; i < 
ﬁd_node
->
num_keys
; i++, j++) {

705 i‡(
j
 =
À·_ödex
) j++;

706 
ãmp_keys
[
j
] = 
ﬁd_node
->
keys
[
i
];

709 
ãmp_poöãrs
[
À·_ödex
 + 1] = 
right
;

710 
ãmp_keys
[
À·_ödex
] = 
key
;

716 
•lô
 = 
	`cut
(
‹dî
);

717 
√w_node
 = 
	`make_node
();

718 
ﬁd_node
->
num_keys
 = 0;

719 
i
 = 0; i < 
•lô
 - 1; i++) {

720 
ﬁd_node
->
poöãrs
[
i
] = 
ãmp_poöãrs
[i];

721 
ﬁd_node
->
keys
[
i
] = 
ãmp_keys
[i];

722 
ﬁd_node
->
num_keys
++;

724 
ﬁd_node
->
poöãrs
[
i
] = 
ãmp_poöãrs
[i];

725 
k_¥ime
 = 
ãmp_keys
[
•lô
 - 1];

726 ++
i
, 
j
 = 0; i < 
‹dî
; i++, j++) {

727 
√w_node
->
poöãrs
[
j
] = 
ãmp_poöãrs
[
i
];

728 
√w_node
->
keys
[
j
] = 
ãmp_keys
[
i
];

729 
√w_node
->
num_keys
++;

731 
√w_node
->
poöãrs
[
j
] = 
ãmp_poöãrs
[
i
];

732 
	`‰ì
(
ãmp_poöãrs
);

733 
	`‰ì
(
ãmp_keys
);

734 
√w_node
->
∑ª¡
 = 
ﬁd_node
->parent;

735 
i
 = 0; i <
√w_node
->
num_keys
; i++) {

736 
chûd
 = 
√w_node
->
poöãrs
[
i
];

737 
chûd
->
∑ª¡
 = 
√w_node
;

745  
	`ö£π_öto_∑ª¡
(
roŸ
, 
ﬁd_node
, 
k_¥ime
, 
√w_node
);

746 
	}
}

753 
node
 * 
	$ö£π_öto_∑ª¡
(
node
 * 
roŸ
,Çodê* 
À·
, 
key
,Çodê* 
right
) {

755 
À·_ödex
;

756 
node
 * 
∑ª¡
;

758 
∑ª¡
 = 
À·
->parent;

762 i‡(
∑ª¡
 =
NULL
)

763  
	`ö£π_öto_√w_roŸ
(
À·
, 
key
, 
right
);

773 
À·_ödex
 = 
	`gë_À·_ödex
(
∑ª¡
, 
À·
);

779 i‡(
∑ª¡
->
num_keys
 < 
‹dî
 - 1)

780  
	`ö£π_öto_node
(
roŸ
, 
∑ª¡
, 
À·_ödex
, 
key
, 
right
);

786  
	`ö£π_öto_node_a·î_•lôtög
(
roŸ
, 
∑ª¡
, 
À·_ödex
, 
key
, 
right
);

787 
	}
}

794 
node
 * 
	$ö£π_öto_√w_roŸ
(
node
 * 
À·
, 
key
,Çodê* 
right
) {

796 
node
 * 
roŸ
 = 
	`make_node
();

797 
roŸ
->
keys
[0] = 
key
;

798 
roŸ
->
poöãrs
[0] = 
À·
;

799 
roŸ
->
poöãrs
[1] = 
right
;

800 
roŸ
->
num_keys
++;

801 
roŸ
->
∑ª¡
 = 
NULL
;

802 
À·
->
∑ª¡
 = 
roŸ
;

803 
right
->
∑ª¡
 = 
roŸ
;

804  
roŸ
;

805 
	}
}

812 
node
 * 
	$°¨t_√w_åì
(
key
, 
ªc‹d
 * 
poöãr
) {

814 
node
 * 
roŸ
 = 
	`make_Àaf
();

815 
roŸ
->
keys
[0] = 
key
;

816 
roŸ
->
poöãrs
[0] = 
poöãr
;

817 
roŸ
->
poöãrs
[
‹dî
 - 1] = 
NULL
;

818 
roŸ
->
∑ª¡
 = 
NULL
;

819 
roŸ
->
num_keys
++;

820  
roŸ
;

821 
	}
}

831 
node
 * 
	$ö£π_åì
–
node
 * 
roŸ
, 
key
, 
vÆue
[] ) {

833 
ªc‹d
 * 
poöãr
;

834 
node
 * 
Àaf
;

840 i‡(
	`föd_åì
(
roŸ
, 
key
, 
Ál£
Ë!
NULL
)

841  
roŸ
;

846 
poöãr
 = 
	`make_ªc‹d
(
vÆue
);

853 i‡(
roŸ
 =
NULL
)

854  
	`°¨t_√w_åì
(
key
, 
poöãr
);

861 
Àaf
 = 
	`föd_Àaf
(
roŸ
, 
key
, 
Ál£
);

866 i‡(
Àaf
->
num_keys
 < 
‹dî
 - 1) {

867 
Àaf
 = 
	`ö£π_öto_Àaf
÷óf, 
key
, 
poöãr
);

868  
roŸ
;

875  
	`ö£π_öto_Àaf_a·î_•lôtög
(
roŸ
, 
Àaf
, 
key
, 
poöãr
);

876 
	}
}

889 
	$gë_√ighb‹_ödex
–
node
 * 
n
 ) {

891 
i
;

899 
i
 = 0; i <
n
->
∑ª¡
->
num_keys
; i++)

900 i‡(
n
->
∑ª¡
->
poöãrs
[
i
] ==Ç)

901  
i
 - 1;

904 
	`¥ötf
("Search forÇonexistentÖointerÅoÇode inÖarent.\n");

905 
	`¥ötf
("Node: %#lx\n", ()
n
);

906 
	`exô
(
EXIT_FAILURE
);

907 
	}
}

910 
node
 * 
	$ªmove_íåy_‰om_node
(
node
 * 
n
, 
key
,Çodê* 
poöãr
) {

912 
i
, 
num_poöãrs
;

915 
i
 = 0;

916 
n
->
keys
[
i
] !
key
)

917 
i
++;

918 ++
i
; i < 
n
->
num_keys
; i++)

919 
n
->
keys
[
i
 - 1] =Ç->keys[i];

923 
num_poöãrs
 = 
n
->
is_Àaf
 ?Ç->
num_keys
 :Ç->num_keys + 1;

924 
i
 = 0;

925 
n
->
poöãrs
[
i
] !
poöãr
)

926 
i
++;

927 ++
i
; i < 
num_poöãrs
; i++)

928 
n
->
poöãrs
[
i
 - 1] =Ç->pointers[i];

932 
n
->
num_keys
--;

936 i‡(
n
->
is_Àaf
)

937 
i
 = 
n
->
num_keys
; i < 
‹dî
 - 1; i++)

938 
n
->
poöãrs
[
i
] = 
NULL
;

940 
i
 = 
n
->
num_keys
 + 1; i < 
‹dî
; i++)

941 
n
->
poöãrs
[
i
] = 
NULL
;

943  
n
;

944 
	}
}

947 
node
 * 
	$adju°_roŸ
(
node
 * 
roŸ
) {

949 
node
 * 
√w_roŸ
;

956 i‡(
roŸ
->
num_keys
 > 0)

957  
roŸ
;

966 i‡(!
roŸ
->
is_Àaf
) {

967 
√w_roŸ
 = 
roŸ
->
poöãrs
[0];

968 
√w_roŸ
->
∑ª¡
 = 
NULL
;

975 
√w_roŸ
 = 
NULL
;

977 
	`‰ì
(
roŸ
->
keys
);

978 
	`‰ì
(
roŸ
->
poöãrs
);

979 
	`‰ì
(
roŸ
);

981  
√w_roŸ
;

982 
	}
}

991 
node
 * 
	$cﬂÀs˚_nodes
(
node
 * 
roŸ
,Çodê* 
n
,Çodê* 
√ighb‹
, 
√ighb‹_ödex
, 
k_¥ime
) {

993 
i
, 
j
, 
√ighb‹_ö£πi⁄_ödex
, 
n_íd
;

994 
node
 * 
tmp
;

1000 i‡(
√ighb‹_ödex
 == -1) {

1001 
tmp
 = 
n
;

1002 
n
 = 
√ighb‹
;

1003 
√ighb‹
 = 
tmp
;

1012 
√ighb‹_ö£πi⁄_ödex
 = 
√ighb‹
->
num_keys
;

1019 i‡(!
n
->
is_Àaf
) {

1024 
√ighb‹
->
keys
[
√ighb‹_ö£πi⁄_ödex
] = 
k_¥ime
;

1025 
√ighb‹
->
num_keys
++;

1028 
n_íd
 = 
n
->
num_keys
;

1030 
i
 = 
√ighb‹_ö£πi⁄_ödex
 + 1, 
j
 = 0; j < 
n_íd
; i++, j++) {

1031 
√ighb‹
->
keys
[
i
] = 
n
->keys[
j
];

1032 
√ighb‹
->
poöãrs
[
i
] = 
n
->poöãrs[
j
];

1033 
√ighb‹
->
num_keys
++;

1034 
n
->
num_keys
--;

1041 
√ighb‹
->
poöãrs
[
i
] = 
n
->poöãrs[
j
];

1046 
i
 = 0; i < 
√ighb‹
->
num_keys
 + 1; i++) {

1047 
tmp
 = (
node
 *)
√ighb‹
->
poöãrs
[
i
];

1048 
tmp
->
∑ª¡
 = 
√ighb‹
;

1059 
i
 = 
√ighb‹_ö£πi⁄_ödex
, 
j
 = 0; j < 
n
->
num_keys
; i++, j++) {

1060 
√ighb‹
->
keys
[
i
] = 
n
->keys[
j
];

1061 
√ighb‹
->
poöãrs
[
i
] = 
n
->poöãrs[
j
];

1062 
√ighb‹
->
num_keys
++;

1064 
√ighb‹
->
poöãrs
[
‹dî
 - 1] = 
n
->pointers[order - 1];

1067 
roŸ
 = 
	`dñëe_íåy
‘oŸ, 
n
->
∑ª¡
, 
k_¥ime
,Ç);

1068 
	`‰ì
(
n
->
keys
);

1069 
	`‰ì
(
n
->
poöãrs
);

1070 
	`‰ì
(
n
);

1071  
roŸ
;

1072 
	}
}

1081 
node
 * 
	$ªdi°ribuã_nodes
(
node
 * 
roŸ
,Çodê* 
n
,Çodê* 
√ighb‹
, 
√ighb‹_ödex
,

1082 
k_¥ime_ödex
, 
k_¥ime
) {

1084 
i
;

1085 
node
 * 
tmp
;

1092 i‡(
√ighb‹_ödex
 != -1) {

1093 i‡(!
n
->
is_Àaf
)

1094 
n
->
poöãrs
[n->
num_keys
 + 1] =Ç->pointers[n->num_keys];

1095 
i
 = 
n
->
num_keys
; i > 0; i--) {

1096 
n
->
keys
[
i
] =Ç->keys[i - 1];

1097 
n
->
poöãrs
[
i
] =Ç->pointers[i - 1];

1099 i‡(!
n
->
is_Àaf
) {

1100 
n
->
poöãrs
[0] = 
√ighb‹
->poöãrs[√ighb‹->
num_keys
];

1101 
tmp
 = (
node
 *)
n
->
poöãrs
[0];

1102 
tmp
->
∑ª¡
 = 
n
;

1103 
√ighb‹
->
poöãrs
[√ighb‹->
num_keys
] = 
NULL
;

1104 
n
->
keys
[0] = 
k_¥ime
;

1105 
n
->
∑ª¡
->
keys
[
k_¥ime_ödex
] = 
√ighb‹
->keys[√ighb‹->
num_keys
 - 1];

1108 
n
->
poöãrs
[0] = 
√ighb‹
->poöãrs[√ighb‹->
num_keys
 - 1];

1109 
√ighb‹
->
poöãrs
[√ighb‹->
num_keys
 - 1] = 
NULL
;

1110 
n
->
keys
[0] = 
√ighb‹
->keys[√ighb‹->
num_keys
 - 1];

1111 
n
->
∑ª¡
->
keys
[
k_¥ime_ödex
] =Ç->keys[0];

1122 i‡(
n
->
is_Àaf
) {

1123 
n
->
keys
[n->
num_keys
] = 
√ighb‹
->keys[0];

1124 
n
->
poöãrs
[n->
num_keys
] = 
√ighb‹
->pointers[0];

1125 
n
->
∑ª¡
->
keys
[
k_¥ime_ödex
] = 
√ighb‹
->keys[1];

1128 
n
->
keys
[n->
num_keys
] = 
k_¥ime
;

1129 
n
->
poöãrs
[n->
num_keys
 + 1] = 
√ighb‹
->pointers[0];

1130 
tmp
 = (
node
 *)
n
->
poöãrs
[n->
num_keys
 + 1];

1131 
tmp
->
∑ª¡
 = 
n
;

1132 
n
->
∑ª¡
->
keys
[
k_¥ime_ödex
] = 
√ighb‹
->keys[0];

1134 
i
 = 0; i < 
√ighb‹
->
num_keys
 - 1; i++) {

1135 
√ighb‹
->
keys
[
i
] =Çeighbor->keys[i + 1];

1136 
√ighb‹
->
poöãrs
[
i
] =Çeighbor->pointers[i + 1];

1138 i‡(!
n
->
is_Àaf
)

1139 
√ighb‹
->
poöãrs
[
i
] =Çeighbor->pointers[i + 1];

1146 
n
->
num_keys
++;

1147 
√ighb‹
->
num_keys
--;

1149  
roŸ
;

1150 
	}
}

1158 
node
 * 
	$dñëe_íåy
–
node
 * 
roŸ
,Çodê* 
n
, 
key
, * 
poöãr
 ) {

1160 
mö_keys
;

1161 
node
 * 
√ighb‹
;

1162 
√ighb‹_ödex
;

1163 
k_¥ime_ödex
, 
k_¥ime
;

1164 
ˇ∑côy
;

1168 
n
 = 
	`ªmove_íåy_‰om_node
“, 
key
, 
poöãr
);

1173 i‡(
n
 =
roŸ
)

1174  
	`adju°_roŸ
(
roŸ
);

1185 
mö_keys
 = 
n
->
is_Àaf
 ? 
	`cut
(
‹dî
 - 1) : cut(order) - 1;

1191 i‡(
n
->
num_keys
 >
mö_keys
)

1192  
roŸ
;

1206 
√ighb‹_ödex
 = 
	`gë_√ighb‹_ödex
–
n
 );

1207 
k_¥ime_ödex
 = 
√ighb‹_ödex
 == -1 ? 0 :Çeighbor_index;

1208 
k_¥ime
 = 
n
->
∑ª¡
->
keys
[
k_¥ime_ödex
];

1209 
√ighb‹
 = 
√ighb‹_ödex
 =-1 ? 
n
->
∑ª¡
->
poöãrs
[1] :

1210 
n
->
∑ª¡
->
poöãrs
[
√ighb‹_ödex
];

1212 
ˇ∑côy
 = 
n
->
is_Àaf
 ? 
‹dî
 : order - 1;

1216 i‡(
√ighb‹
->
num_keys
 + 
n
->num_key†< 
ˇ∑côy
)

1217  
	`cﬂÀs˚_nodes
(
roŸ
, 
n
, 
√ighb‹
, 
√ighb‹_ödex
, 
k_¥ime
);

1222  
	`ªdi°ribuã_nodes
(
roŸ
, 
n
, 
√ighb‹
, 
√ighb‹_ödex
, 
k_¥ime_ödex
, 
k_¥ime
);

1223 
	}
}

1229 
node
 * 
	$dñëe_åì
(
node
 * 
roŸ
, 
key
) {

1231 
node
 * 
key_Àaf
;

1232 
ªc‹d
 * 
key_ªc‹d
;

1234 
key_ªc‹d
 = 
	`föd_åì
(
roŸ
, 
key
, 
Ál£
);

1235 
key_Àaf
 = 
	`föd_Àaf
(
roŸ
, 
key
, 
Ál£
);

1236 i‡(
key_ªc‹d
 !
NULL
 && 
key_Àaf
 != NULL) {

1237 
roŸ
 = 
	`dñëe_íåy
‘oŸ, 
key_Àaf
, 
key
, 
key_ªc‹d
);

1238 
	`‰ì
(
key_ªc‹d
);

1240  
roŸ
;

1241 
	}
}

1244 
	$de°roy_åì_nodes
(
node
 * 
roŸ
) {

1245 
i
;

1246 i‡(
roŸ
->
is_Àaf
)

1247 
i
 = 0; i < 
roŸ
->
num_keys
; i++)

1248 
	`‰ì
(
roŸ
->
poöãrs
[
i
]);

1250 
i
 = 0; i < 
roŸ
->
num_keys
 + 1; i++)

1251 
	`de°roy_åì_nodes
(
roŸ
->
poöãrs
[
i
]);

1252 
	`‰ì
(
roŸ
->
poöãrs
);

1253 
	`‰ì
(
roŸ
->
keys
);

1254 
	`‰ì
(
roŸ
);

1255 
	}
}

1258 
node
 * 
	$de°roy_åì
(
node
 * 
roŸ
) {

1259 
	`de°roy_åì_nodes
(
roŸ
);

1260  
NULL
;

1261 
	}
}

1264 
	$öô_∑ge_li°
(){

1265 
hód
 = (
∑ge_li°
 *)
	`mÆloc
((page_list));

1266 
∑ge_li°
 *
√w
 = (∑ge_li° *)
	`mÆloc
((page_list));

1269 
hód
->
off£t
 = 4096;

1270 
hód
->
is_‰ì
 = 
åue
;

1271 
hód
->
√xt
 = 
√w
;

1272 
√w
->
off£t
 = 0;

1273 
√w
->
is_‰ì
 = 
Ál£
;

1274 
√w
->
√xt
 = 
NULL
;

1275 
	}
}

1279 
öt64_t
 
	$sˇn_‰ì_∑ge
(){

1280 
öt64_t
 
œ°_off£t
;

1281 
öt64_t
 
√xt_Â_off£t
 = 0;

1282 
∑ge_li°
 *
poöãr
;

1283 
∑ge_li°
 *
√w
;

1285 
poöãr
 = 
hód
;Öoöãr->
off£t
 !0 &&Öoöãr->
√xt
 !
NULL
;Öointer =Öointer->next){

1286 if(
poöãr
->
is_‰ì
 =
åue
){

1287  
poöãr
->
off£t
;

1289 
œ°_off£t
 = 
poöãr
->
off£t
;

1293 
poöãr
->
off£t
 = 
œ°_off£t
 + 4096;

1294 
poöãr
->
is_‰ì
 = 
åue
;

1295 
√w
 = (
∑ge_li°
 *)
	`mÆloc
((page_list));

1296 
√w
->
off£t
 = 0;

1297 
√w
->
is_‰ì
 = 
Ál£
;

1298 
poöãr
->
√xt
 = 
√w
;

1299 
√w
->
√xt
 = 
NULL
;

1302 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
poöãr
->
off£t
, 
SEEK_SET
);

1303 
	`fwrôe
(&
√xt_Â_off£t
, 8, 1, 
Â
);

1305  
poöãr
->
off£t
;

1306 
	}
}

1310 
öt64_t
 
	$sˇn_u£_∑ge
(){

1311 
öt64_t
 
cou¡
 = 0;

1312 
∑ge_li°
 *
poöãr
;

1314 
poöãr
 = 
hód
;Öoöãr->
off£t
 !0 &&Öoöãr->
√xt
 !
NULL
;Öointer =Öointer->next){

1315 if(
poöãr
->
is_‰ì
 =
Ál£
){

1316 
cou¡
++;

1320  
cou¡
;

1321 
	}
}

1327 
	$ch™ge_‰ì_∑ge
(
öt64_t
 
off£t
){

1328 
∑ge_li°
 *
poöãr
;

1330 
poöãr
 = 
hód
;Öoöãr->
off£t
 !0 &&Öoöãr->
√xt
 !
NULL
;Öointer =Öointer->next){

1331 if(
poöãr
->
off£t
 == offset){

1332 
poöãr
->
is_‰ì
 = 
Ál£
;

1335 
	}
}

1340 
	$vacuum_usög_∑ge
(
öt64_t
 
off£t
){

1341 
∑ge_li°
 *
poöãr
;

1344 
poöãr
 = 
hód
;Öoöãr->
off£t
 !0 &&Öoöãr->
√xt
 !
NULL
;Öointer =Öointer->next){

1345 if(
poöãr
->
off£t
 == offset){

1346 
poöãr
->
is_‰ì
 = 
åue
;

1349 
	}
}

1356 
	$öô_hódî_∑ge
(){

1357 
öt64_t
 
Â_off£t
 = 4096;

1359 
öt64_t
 
Ω_off£t
 = 0;

1360 
öt64_t
 
≤um
 = 1;

1366 
	`f£eko
(
Â
, 
deÁu…_off£t
, 
SEEK_SET
);

1367 
	`fwrôe
(&
Â_off£t
, 8, 1, 
Â
);

1368 
	`fwrôe
(&
Ω_off£t
, 8, 1, 
Â
);

1369 
	`fwrôe
(&
≤um
, 8, 1, 
Â
);

1370 
	}
}

1371 
	$modify_hódî_∑ge
(
öt64_t
 
Ω_off£t
){

1372 
öt64_t
 
Â_off£t
 = 
	`sˇn_‰ì_∑ge
();

1373 
öt64_t
 
≤um
 = 
	`sˇn_u£_∑ge
();

1376 
	`f£eko
(
Â
, 
deÁu…_off£t
, 
SEEK_SET
);

1377 
	`fwrôe
(&
Â_off£t
, 8, 1, 
Â
);

1378 
	`fwrôe
(&
Ω_off£t
, 8, 1, 
Â
);

1379 
	`fwrôe
(&
≤um
, 8, 1, 
Â
);

1380 
	}
}

1388 
	$›í_db
(*
∑th«me
){

1389 
Â
 = 
	`f›í
(
∑th«me
, "a+");

1390 if(
Â
 =
NULL
){

1391 
	`Ârötf
(
°dîr
, "Error : fileÖath\n");

1392 
	`exô
(
EXIT_FAILURE
);

1396 
deÁu…_off£t
 = 
	`·ñlo
(
Â
);

1399 
	`öô_∑ge_li°
();

1402 
	`öô_hódî_∑ge
();

1405 
	`fÊush
(
Â
);

1406 
fd
 = 
	`fûío
(
Â
);

1409 
	}
}

1412 
öt64_t
 
	$öô_Àaf_∑ge
(
öt64_t
 
off£t
){

1413 
öt64_t
 
p_off£t
 = 0;

1414 
öt64_t
 
rs_off£t
 = 0;

1415 
is_Àaf
 = 1;

1416 
num_keys
 = 0;

1418 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
, 
SEEK_SET
);

1420 
	`fwrôe
(&
p_off£t
, 8, 1, 
Â
);

1422 
	`fwrôe
(&
is_Àaf
, 4, 1, 
Â
);

1424 
	`fwrôe
(&
num_keys
, 4, 1, 
Â
);

1427 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 120, 
SEEK_SET
);

1429 
	`fwrôe
(&
rs_off£t
, 8, 1, 
Â
);

1431  
off£t
;

1432 
	}
}

1433 
öt64_t
 
	$öô_öã∫Æ_∑ge
(
öt64_t
 
off£t
, i¡64_à
p_off£t
){

1435 
is_Àaf
 = 0, 
num_keys
 = 0;

1437 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
, 
SEEK_SET
);

1439 
	`fwrôe
(&
p_off£t
, 8, 1, 
Â
);

1441 
	`fwrôe
(&
is_Àaf
, 4, 1, 
Â
);

1443 
	`fwrôe
(&
num_keys
, 4, 1, 
Â
);

1445  
off£t
;

1446 
	}
}

1447 
	$gë_À·_off£t
(
öt64_t
 
p_off£t
, i¡64_à
l_off£t
){

1448 
öt64_t
 
À·_off£t
 = 0, 
èrgë_off£t
;

1449 
num_keys
;

1452 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 12, 
SEEK_SET
);

1453 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

1455 
À·_off£t
 <
num_keys
){

1457 if(
À·_off£t
 == 0)

1458 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 120, 
SEEK_SET
);

1460 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 128 + (
À·_off£t
-1)*16 + 8, 
SEEK_SET
);

1461 
	`‰ód
(&
èrgë_off£t
, 8, 1, 
Â
);

1463 if(
l_off£t
 =
èrgë_off£t
){

1466 
À·_off£t
++;

1469  
À·_off£t
;

1470 
	}
}

1471 
öt64_t
 
	$ö£π_öto_Àaf_∑ge
(
öt64_t
 
Àaf_off£t
, i¡64_à
key
, *
vÆue
){

1472 
i
, 
ö£πi⁄_poöt
, 
num_keys
;

1473 
öt64_t
 
èrgë_key
, 
ãmp_key
;

1474 
ãmp_vÆue
[120];

1477 
ö£πi⁄_poöt
 = 0;

1480 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 12, 
SEEK_SET
);

1481 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

1483 
ö£πi⁄_poöt
 < 
num_keys
){

1485 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 128 + 
ö£πi⁄_poöt
*128, 
SEEK_SET
);

1486 
	`‰ód
(&
èrgë_key
, 8, 1, 
Â
);

1487 if(
key
 <
èrgë_key
){

1490 
ö£πi⁄_poöt
++;

1494 
i
 = 
num_keys
; i > 
ö£πi⁄_poöt
; i--){

1495 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 128 + 
i
*128, 
SEEK_SET
);

1496 
	`‰ód
(&
ãmp_key
, 8, 1, 
Â
);

1497 
	`‰ód
(&
ãmp_vÆue
, 1, 120, 
Â
);

1499 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 128 + (
i
+1)*128, 
SEEK_SET
);

1500 
	`fwrôe
(&
ãmp_key
, 8, 1, 
Â
);

1501 
	`fwrôe
(&
ãmp_vÆue
, 1, 120, 
Â
);

1505 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 128 + 
ö£πi⁄_poöt
*128, 
SEEK_SET
);

1506 
	`fwrôe
(&
key
, 8, 1, 
Â
);

1507 
	`fwrôe
(
vÆue
, 1, 120, 
Â
);

1510 
num_keys
++;

1511 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 12, 
SEEK_SET
);

1512 
	`fwrôe
(&
num_keys
, 4, 1, 
Â
);

1514  
Àaf_off£t
;

1515 
	}
}

1516 
öt64_t
 
	$ö£π_öto_Àaf_∑ge_a·î_•lôtög
(
öt64_t
 
Ω_off£t
, i¡64_à
Àaf_off£t
, i¡64_à
key
, *
vÆue
){

1517 
öt64_t
 
√w_Àaf_off£t
, *
ãmp_keys
, 
èrgë_key
, 
√w_key
, 
√w_rs_off£t
 = 0, 
p_off£t
;

1518 
ö£πi⁄_ödex
, 
•lô
, 
i
, 
j
, 
num_keys
, 
√w_num_keys
;

1519 **
ãmp_vÆues
;

1522 
√w_Àaf_off£t
 = 
	`öô_Àaf_∑ge
(
	`sˇn_‰ì_∑ge
());

1525 
	`ch™ge_‰ì_∑ge
(
√w_Àaf_off£t
);

1526 
	`modify_hódî_∑ge
(
Ω_off£t
);

1529 
ãmp_keys
 = (
öt64_t
 *)
	`mÆloc
(
Àaf_‹dî
 * (int64_t));

1530 
ãmp_vÆues
 =(**)
	`mÆloc
(
Àaf_‹dî
 * (*));

1532 
i
 = 0; i < 
Àaf_‹dî
; i++){

1533 
ãmp_vÆues
[
i
] = (*)
	`mÆloc
(() * 120);

1536 
ö£πi⁄_ödex
 = 0;

1539 
ö£πi⁄_ödex
 < 
Àaf_‹dî
 -1){

1541 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 128 + 128*
ö£πi⁄_ödex
, 
SEEK_SET
);

1542 
	`‰ód
(&
èrgë_key
, 8, 1, 
Â
);

1543 if(
èrgë_key
 >
key
){

1546 
ö£πi⁄_ödex
++;

1551 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 12, 
SEEK_SET
);

1552 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

1553 
i
 = 0, 
j
 = 0; i < 
num_keys
; i++, j++){

1554 if(
j
 =
ö£πi⁄_ödex
)

1555 
j
++;

1556 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 128 + 128*
i
, 
SEEK_SET
);

1557 
	`‰ód
((
ãmp_keys
+
j
), 8, 1, 
Â
);

1558 
	`‰ód
(*(
ãmp_vÆues
+
j
), 1, 120, 
Â
);

1561 
ãmp_keys
[
ö£πi⁄_ödex
] = 
key
;

1562 
	`memmove
(
ãmp_vÆues
[
ö£πi⁄_ödex
], 
vÆue
, 120);

1565 
num_keys
 = 0;

1566 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 12, 
SEEK_SET
);

1567 
	`fwrôe
(&
num_keys
, 4, 1, 
Â
);

1569 
•lô
 = 
	`cut
(
Àaf_‹dî
 - 1);

1572 
i
 = 0; i < 
•lô
; i++){

1573 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 128 + 128*
i
, 
SEEK_SET
);

1574 
	`fwrôe
((
ãmp_keys
+
i
), 8, 1, 
Â
);

1575 
	`fwrôe
(*(
ãmp_vÆues
+
i
), 1, 120, 
Â
);

1576 
num_keys
++;

1579 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 12, 
SEEK_SET
);

1580 
	`fwrôe
(&
num_keys
, 4, 1, 
Â
);

1582 
i
 = 
•lô
, 
j
 = 0; i < 
‹dî
; i++, j++){

1583 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_Àaf_off£t
 + 128 + 128*
j
, 
SEEK_SET
);

1584 
	`fwrôe
((
ãmp_keys
+
i
), 8, 1, 
Â
);

1585 
	`fwrôe
(*(
ãmp_vÆues
+
i
), 1, 120, 
Â
);

1586 
√w_num_keys
++;

1589 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_Àaf_off£t
 + 12, 
SEEK_SET
);

1590 
	`fwrôe
(&
√w_num_keys
, 4, 1, 
Â
);

1593 
	`‰ì
(
ãmp_keys
);

1594 
i
 = 0; i < 
Àaf_‹dî
; i++){

1595 
	`‰ì
(
ãmp_vÆues
[
i
]);

1597 
	`‰ì
(
ãmp_vÆues
);

1601 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 120, 
SEEK_SET
);

1602 
	`fwrôe
(&
√w_Àaf_off£t
, 8, 1, 
Â
);

1604 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_Àaf_off£t
 + 120, 
SEEK_SET
);

1605 
	`fwrôe
(&
√w_rs_off£t
, 8, 1, 
Â
);

1608 
i
 = 
num_keys
; i < 
Àaf_‹dî
 -1; i++){

1609 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
 + 128 + 128*
i
 + 8, 
SEEK_SET
);

1610 
	`fwrôe
(
NULL
, 1, 120, 
Â
);

1612 
i
 = 
√w_num_keys
; i < 
Àaf_‹dî
 -1; i++){

1613 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_Àaf_off£t
 + 128 + 128*
i
 + 8, 
SEEK_SET
);

1614 
	`fwrôe
(
NULL
, 1, 120, 
Â
);

1619 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Àaf_off£t
, 
SEEK_SET
);

1620 
	`‰ód
(&
p_off£t
, 8, 1, 
Â
);

1621 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_Àaf_off£t
, 
SEEK_SET
);

1622 
	`fwrôe
(&
p_off£t
, 8, 1, 
Â
);

1624 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_Àaf_off£t
 + 128, 
SEEK_SET
);

1625 
	`‰ód
(&
√w_key
, 8, 1, 
Â
);

1628  
	`ö£π_öto_∑ª¡
(
Ω_off£t
, 
Àaf_off£t
, 
√w_key
, 
√w_Àaf_off£t
);

1629 
	}
}

1630 
öt64_t
 
	$ö£π_öto_öã∫Æ_∑ge
(
öt64_t
 
Ω_off£t
, i¡64_à
p_off£t
, i¡64_à
À·_off£t
, i¡64_à
key
, i¡64_à
r_off£t
){

1631 
öt64_t
 
ãmp_key
, 
ãmp_off£t
;

1632 
num_keys
, 
i
;

1635 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 12, 
SEEK_SET
);

1636 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

1640 if(
À·_off£t
 != 0){

1641 
i
 = 
num_keys
; i > (
À·_off£t
-1); i--){

1642 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 128 + 
i
*16, 
SEEK_SET
);

1643 
	`‰ód
(&
ãmp_key
, 8, 1, 
Â
);

1644 
	`‰ód
(&
ãmp_off£t
, 8, 1, 
Â
);

1646 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 128 + (
i
+1)*16, 
SEEK_SET
);

1647 
	`fwrôe
(&
ãmp_key
, 8, 1, 
Â
);

1648 
	`fwrôe
(&
ãmp_off£t
, 8, 1, 
Â
);

1653 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 128 + (
À·_off£t
)*16, 
SEEK_SET
);

1654 
	`fwrôe
(&
key
, 8, 1, 
Â
);

1655 
	`fwrôe
(&
r_off£t
, 8, 1, 
Â
);

1658 
num_keys
++;

1659 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 12, 
SEEK_SET
);

1660 
	`fwrôe
(&
num_keys
, 4, 1, 
Â
);

1662  
Ω_off£t
;

1663 
	}
}

1664 
öt64_t
 
	$ö£π_öto_öã∫Æ_∑ge_a·î_•lôtög
(
öt64_t
 
Ω_off£t
, i¡64_à
ﬁd_off£t
, 
À·_off£t
, i¡64_à
key
, i¡64_à
r_off£t
){

1665 
i
, 
j
, 
•lô
, 
ﬁd_num_keys
, 
√w_num_keys
;

1666 
öt64_t
 
k_¥ime
, *
ãmp_keys
, *
ãmp_off£ts
, 
√w_öã∫Æ_off£t
, 
chûd_off£t
, 
p_off£t
;

1669 
ãmp_keys
 = (
öt64_t
 *)
	`mÆloc
(
öã∫Æ_‹dî
 * (int64_t));

1670 
ãmp_off£ts
 = (
öt64_t
 *)
	`mÆloc
((
öã∫Æ_‹dî
 + 1) * (int64_t));

1674 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
 + 12, 
SEEK_SET
);

1675 
	`‰ód
(&
ﬁd_num_keys
, 4, 1, 
Â
);

1678 
i
 = 0, 
j
 = 0; i < 
ﬁd_num_keys
 + 1; i++, j++){

1679 if(
j
 =
À·_off£t
 + 1)

1680 
j
++;

1681 if(
i
 == 0)

1682 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
 + 120, 
SEEK_SET
);

1684 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
 + 128 + 8 + 16*(
i
-1), 
SEEK_SET
);

1686 
	`‰ód
((
ãmp_off£ts
+
j
), 8, 1, 
Â
);

1689 
i
 = 0, 
j
 = 0; i < 
ﬁd_num_keys
; i++, j++){

1690 if(
j
 =
À·_off£t
)

1691 
j
++;

1692 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
 + 128 + 16*
i
, 
SEEK_SET
);

1693 
	`‰ód
((
ãmp_keys
+
j
), 8, 1, 
Â
);

1695 
ãmp_off£ts
[
À·_off£t
 + 1] = 
r_off£t
;

1696 
ãmp_keys
[
À·_off£t
] = 
key
;

1700 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
, 
SEEK_SET
);

1701 
	`‰ód
(&
p_off£t
, 8, 1, 
Â
);

1703 
•lô
 = 
	`cut
(
öã∫Æ_‹dî
);

1705 
√w_öã∫Æ_off£t
 = 
	`öô_öã∫Æ_∑ge
(
	`sˇn_‰ì_∑ge
(), 
p_off£t
);

1707 
	`ch™ge_‰ì_∑ge
(
√w_öã∫Æ_off£t
);

1709 
	`modify_hódî_∑ge
(
Ω_off£t
);

1712 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_öã∫Æ_off£t
 + 12, 
SEEK_SET
);

1713 
	`‰ód
(&
√w_num_keys
, 4, 1, 
Â
);

1715 
i
 = 0; i < 
•lô
 - 1; i++){

1716 if(
i
 == 0){

1717 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
 + 120, 
SEEK_SET
);

1718 
	`fwrôe
((
ãmp_off£ts
 + 
i
), 8, 1, 
Â
);

1719 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
 + 128, 
SEEK_SET
);

1720 
	`fwrôe
((
ãmp_keys
 + 
i
), 8, 1, 
Â
);

1723 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
 + 128 + 16*(
i
-1Ë+ 8, 
SEEK_SET
);

1724 
	`fwrôe
((
ãmp_off£ts
 + 
i
), 8, 1, 
Â
);

1725 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
 + 128 + 16*(
i
-1), 
SEEK_SET
);

1726 
	`fwrôe
((
ãmp_keys
 + 
i
), 8, 1, 
Â
);

1728 
ﬁd_num_keys
++;

1730 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
 + 128 + 16*(
i
-1Ë+ 8, 
SEEK_SET
);

1731 
	`fwrôe
((
ãmp_off£ts
 + 
i
), 8, 1, 
Â
);

1732 
k_¥ime
 = 
ãmp_keys
[
•lô
 - 1];

1734 ++
i
, 
j
 = 0; i < 
öã∫Æ_‹dî
; i++, j++){

1735 if(
j
 == 0){

1736 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_öã∫Æ_off£t
 + 120, 
SEEK_SET
);

1737 
	`fwrôe
((
ãmp_off£ts
 + 
i
), 8, 1, 
Â
);

1738 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_öã∫Æ_off£t
 + 128, 
SEEK_SET
);

1739 
	`fwrôe
((
ãmp_keys
 + 
i
), 8, 1, 
Â
);

1742 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_öã∫Æ_off£t
 + 128 + 16*(
j
-1Ë+ 8, 
SEEK_SET
);

1743 
	`fwrôe
((
ãmp_off£ts
 + 
i
), 8, 1, 
Â
);

1744 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_öã∫Æ_off£t
 + 128 + 16*(
j
-1), 
SEEK_SET
);

1745 
	`fwrôe
((
ãmp_keys
 + 
i
), 8, 1, 
Â
);

1747 
√w_num_keys
;

1749 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_öã∫Æ_off£t
 + 128 + 16*(
j
-1Ë+ 8, 
SEEK_SET
);

1750 
	`fwrôe
((
ãmp_off£ts
 + 
i
), 8, 1, 
Â
);

1753 
	`‰ì
(
ãmp_keys
);

1754 
	`‰ì
(
ãmp_off£ts
);

1759 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ﬁd_off£t
 + 12, 
SEEK_SET
);

1760 
	`fwrôe
(&
ﬁd_num_keys
, 4, 1, 
Â
);

1761 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_öã∫Æ_off£t
 + 12, 
SEEK_SET
);

1762 
	`fwrôe
(&
√w_num_keys
, 4, 1, 
Â
);

1765 
i
 = 0; i <
√w_num_keys
; i++){

1767 if(
i
 == 0){

1768 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_öã∫Æ_off£t
 + 120, 
SEEK_SET
);

1771 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_öã∫Æ_off£t
 + 128 + 16*(
i
-1Ë+ 8, 
SEEK_SET
);

1773 
	`‰ód
(&
chûd_off£t
, 8, 1, 
Â
);

1774 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
chûd_off£t
, 
SEEK_SET
);

1775 
	`fwrôe
(&
√w_öã∫Æ_off£t
, 8, 1, 
Â
);

1779  
	`ö£π_öto_∑ª¡_∑ge
(
Ω_off£t
, 
ﬁd_off£t
, 
k_¥ime
, 
√w_öã∫Æ_off£t
);

1780 
	}
}

1781 
öt64_t
 
	$ö£π_öto_∑ª¡_∑ge
(
öt64_t
 
Ω_off£t
, i¡64_à
l_off£t
, i¡64_à
key
, i¡64_à
r_off£t
){

1782 
öt64_t
 
À·_off£t
, 
p_off£t
;

1783 
num_keys
;

1786 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
l_off£t
, 
SEEK_SET
);

1787 
	`‰ód
(&
p_off£t
, 8, 1, 
Â
);

1791 if(
p_off£t
 =
NULL
)

1792  
	`ö£π_öto_√w_roŸ_∑ge
(
l_off£t
, 
key
, 
r_off£t
);

1797 
À·_off£t
 = 
	`gë_À·_off£t
(
p_off£t
, 
l_off£t
);

1801 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 12, 
SEEK_SET
);

1802 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

1804 if(
num_keys
 < 
öã∫Æ_‹dî
 -1)

1805  
	`ö£π_öto_öã∫Æ_∑ge
(
Ω_off£t
, 
p_off£t
, 
À·_off£t
, 
key
, 
r_off£t
);

1809  
	`ö£π_öto_öã∫Æ_∑ge_a·î_•lôtög
(
Ω_off£t
, 
p_off£t
, 
À·_off£t
, 
key
, 
r_off£t
);

1810 
	}
}

1811 
öt64_t
 
	$ö£π_öto_√w_roŸ_∑ge
(
öt64_t
 
l_off£t
, i¡64_à
key
, i¡64_à
r_off£t
){

1812 
öt64_t
 
√w_Ω_off£t
 = 
	`sˇn_‰ì_∑ge
();

1813 
öt64_t
 
p_off£t
 = 0;

1814 
is_Àaf
 = 0, 
num_keys
 = 1;

1817 
	`ch™ge_‰ì_∑ge
(
√w_Ω_off£t
);

1818 
	`modify_hódî_∑ge
(
√w_Ω_off£t
);

1821 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_Ω_off£t
, 
SEEK_SET
);

1823 
	`fwrôe
(&
p_off£t
, 8, 1, 
Â
);

1824 
	`fwrôe
(&
is_Àaf
, 4, 1, 
Â
);

1825 
	`fwrôe
(&
num_keys
, 4, 1, 
Â
);

1828 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_Ω_off£t
 + 120, 
SEEK_SET
);

1830 
	`fwrôe
(&
l_off£t
, 8, 1, 
Â
);

1832 
	`fwrôe
(&
key
, 8, 1, 
Â
);

1834 
	`fwrôe
(&
r_off£t
, 8, 1, 
Â
);

1837 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
l_off£t
, 
SEEK_SET
);

1838 
	`fwrôe
(&
√w_Ω_off£t
, 8, 1, 
Â
);

1841 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
r_off£t
, 
SEEK_SET
);

1842 
	`fwrôe
(&
√w_Ω_off£t
, 8, 1, 
Â
);

1844  
√w_Ω_off£t
;

1845 
	}
}

1849 
öt64_t
 
	$°¨t_√w_åì_∑ge
(
öt64_t
 
key
, *
vÆue
){

1851 
öt64_t
 
Ω_off£t
 = 
	`sˇn_‰ì_∑ge
();

1852 
num_keys
;

1855 
	`öô_Àaf_∑ge
(
Ω_off£t
);

1857 
	`ch™ge_‰ì_∑ge
(
Ω_off£t
);

1859 
	`modify_hódî_∑ge
(
Ω_off£t
);

1862 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Ω_off£t
 + 128, 
SEEK_SET
);

1863 
	`fwrôe
(&
key
, 8, 1, 
Â
);

1864 
	`fwrôe
(
vÆue
, 1, 120, 
Â
);

1867 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Ω_off£t
 + 12, 
SEEK_SET
);

1868 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

1869 
num_keys
++;

1870 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Ω_off£t
 + 12, 
SEEK_SET
);

1871 
	`fwrôe
(&
num_keys
, 4, 1, 
Â
);

1874  
Ω_off£t
;

1875 
	}
}

1881 
	$ö£π
(
öt64_t
 
key
, *
vÆue
){

1882 
ªc‹d
 *
poöãr
;

1883 
öt64_t
 
Ω_off£t
,
Õ_off£t
;

1884 
num_keys
;

1887 
	`f£eko
(
Â
, 
deÁu…_off£t
+8, 
SEEK_SET
);

1888 
	`‰ód
(&
Ω_off£t
, 8, 1, 
Â
);

1891 if(
	`föd
(
key
Ë!
NULL
)

1900 if(
Ω_off£t
 == 0){

1902 
Ω_off£t
 = 
	`°¨t_√w_åì_∑ge
(
key
, 
vÆue
);

1904 
	`modify_hódî_∑ge
(
Ω_off£t
);

1910 
Õ_off£t
 = 
	`föd_Àaf_∑ge
(
Ω_off£t
, 
key
);

1915 
	`f£eko
(
Â
, 
deÁu…_off£t
+
Õ_off£t
+12, 
SEEK_SET
);

1916 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

1918 if(
num_keys
 < 
Àaf_‹dî
 - 1){

1920 
	`ö£π_öto_Àaf_∑ge
(
Õ_off£t
, 
key
, 
vÆue
);

1926 
	`ö£π_öto_Àaf_a·î_•lôtög
(
Ω_off£t
, 
Õ_off£t
, 
key
, 
vÆue
);

1928 
	}
}

1935 
	$Àaf_∑ge_judge
(
öt64_t
 
off£t
){

1936 
is_Àaf
;

1939 
	`f£eko
(
Â
, 
deÁu…_off£t
+8, 
SEEK_SET
);

1940 
	`‰ód
(&
is_Àaf
, 4, 1, 
Â
);

1942 if(
is_Àaf
)

1946 
	}
}

1951 
öt64_t
 
	$föd_Àaf_∑ge
(
öt64_t
 
Ω_off£t
, i¡64_à
key
){

1952 
öt64_t
 
off£t
 = 
Ω_off£t
, 
èrgë_key
;

1953 
num_keys
,
i
 = 0;

1956 if(
off£t
 == 0){

1957  
off£t
;

1959 !
	`Àaf_∑ge_judge
(
off£t
)){

1960 
i
 = 0;

1962 
	`f£eko
(
Â
, 
deÁu…_off£t
+
off£t
+12, 
SEEK_SET
);

1963 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

1965 
i
 < 
num_keys
){

1967 
	`f£eko
(
Â
, 
deÁu…_off£t
+
off£t
+128+(16*
i
), 
SEEK_SET
);

1968 
	`‰ód
(&
èrgë_key
, 8, 1, 
Â
);

1970 if(
key
 >
èrgë_key
)

1971 
i
++;

1976 
	`f£eko
(
Â
, 
deÁu…_off£t
+
off£t
+128+(16*
i
)+8, 
SEEK_SET
);

1977 
	`‰ód
(&
off£t
, 8, 1, 
Â
);

1980  
off£t
;

1981 
	}
}

1986 * 
	$föd
(
öt64_t
 
key
){

1987 
öt64_t
 
Ω_off£t
,
Õ_off£t
,
èrgë_key
;

1988 
i
 = 0, 
num_keys
;

1989 
vÆue
[120];

1992 
	`f£eko
(
Â
, 
deÁu…_off£t
+8, 
SEEK_SET
);

1993 
	`‰ód
(&
Ω_off£t
, 8, 1, 
Â
);

1996 
Õ_off£t
 = 
	`föd_Àaf_∑ge
(
Ω_off£t
, 
key
);

1999 if(
Õ_off£t
 == 0)

2000  
NULL
;

2003 
	`f£eko
(
Â
, 
deÁu…_off£t
+
Õ_off£t
+12, 
SEEK_SET
);

2004 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

2006 
i
 = 0; i < 
num_keys
; i++){

2008 
	`f£eko
(
Â
, 
deÁu…_off£t
+
Õ_off£t
+128+(
i
*128), 
SEEK_SET
);

2009 
	`‰ód
(&
èrgë_key
, 8, 1, 
Â
);

2011 if(
èrgë_key
 =
key
)

2014 if(
i
 =
num_keys
)

2015  
NULL
;

2019 
	`f£eko
(
Â
, 
deÁu…_off£t
+
Õ_off£t
+128+(
i
*128)+8, 
SEEK_SET
);

2020 
	`‰ód
(&
vÆue
, 1, 120, 
Â
);

2022  
vÆue
;

2025 
	}
}

2029 
	$gë_√ighb‹_∑ge_ödex
(
öt64_t
 
off£t
){

2030 
i
,
num_keys
;

2031 
öt64_t
 
p_off£t
, 
èrgë_off£t
;

2034 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
, 
SEEK_SET
);

2035 
	`‰ód
(&
p_off£t
, 8, 1, 
Â
);

2038 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 12, 
SEEK_SET
);

2039 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

2042 
i
 = 0; i <
num_keys
; i++){

2044 if(
i
 == 0){

2045 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 120, 
SEEK_SET
);

2048 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 128 + 16*(
i
-1Ë+ 8, 
SEEK_SET
);

2050 
	`‰ód
(&
èrgë_off£t
, 8, 1, 
Â
);

2052 if(
èrgë_off£t
 =
off£t
){

2053  
i
 -1;

2058 
	`exô
(
EXIT_FAILURE
);

2059 
	}
}

2060 
öt64_t
 
	$ªmove_íåy_‰om_∑ge
(
öt64_t
 
off£t
, i¡64_à
key
, *
vÆue
, i¡64_à
key_off£t
){

2061 
i
, 
num_off_vÆues
, 
is_Àaf
, 
num_keys
;

2062 
öt64_t
 
èrgë_key
, 
èrgë_off£t
, 
ãmp_off£t
, 
ãmp_key
;

2063 
èrgë_vÆue
[120], 
ãmp_vÆue
[120];

2066 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 8, 
SEEK_SET
);

2067 
	`‰ód
(&
is_Àaf
, 4, 1, 
Â
);

2070 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 12, 
SEEK_SET
);

2071 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

2074 
i
 = 0;

2076 if(
is_Àaf
){

2078 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 128*
i
, 
SEEK_SET
);

2079 
	`‰ód
(&
èrgë_key
, 8, 1, 
Â
);

2080 
èrgë_key
 !
key
){

2081 
i
++;

2082 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 128*
i
, 
SEEK_SET
);

2083 
	`‰ód
(&
èrgë_key
, 8, 1, 
Â
);

2085 ++
i
; i < 
num_keys
; i++){

2086 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 128*
i
, 
SEEK_SET
);

2087 
	`‰ód
(&
ãmp_key
, 8, 1, 
Â
);

2089 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 128*(
i
-1), 
SEEK_SET
);

2090 
	`fwrôe
(&
ãmp_key
, 8, 1, 
Â
);

2096 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*
i
, 
SEEK_SET
);

2097 
	`‰ód
(&
èrgë_key
, 8, 1, 
Â
);

2098 
èrgë_key
 !
key
){

2099 
i
++;

2100 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*
i
, 
SEEK_SET
);

2101 
	`‰ód
(&
èrgë_key
, 8, 1, 
Â
);

2103 ++
i
; i < 
num_keys
; i++){

2104 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*
i
, 
SEEK_SET
);

2105 
	`‰ód
(&
ãmp_key
, 8, 1, 
Â
);

2107 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*(
i
-1), 
SEEK_SET
);

2108 
	`fwrôe
(&
ãmp_key
, 8, 1, 
Â
);

2114 
num_off_vÆues
 = 
is_Àaf
 ? 
num_keys
 :Çum_keys + 1;

2115 
i
 = 0;

2117 if(
is_Àaf
){

2119 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 128*
i
 + 8, 
SEEK_SET
);

2120 
	`‰ód
(&
èrgë_vÆue
, 1, 120, 
Â
);

2121 !
	`°rcmp
(
èrgë_vÆue
, 
vÆue
)){

2122 
i
++;

2123 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 128*
i
 + 8, 
SEEK_SET
);

2124 
	`‰ód
(&
èrgë_vÆue
, 1, 120, 
Â
);

2126 ++
i
, i < 
num_off_vÆues
; i++){

2127 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 128*
i
 + 8, 
SEEK_SET
);

2128 
	`‰ód
(&
ãmp_vÆue
, 1, 120, 
Â
);

2130 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 128*(
i
-1Ë+ 8, 
SEEK_SET
);

2131 
	`fwrôe
(&
ãmp_vÆue
, 1, 120, 
Â
);

2138 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*
i
 + 8, 
SEEK_SET
);

2139 
	`‰ód
(&
èrgë_off£t
, 8, 1, 
Â
);

2140 
key_off£t
 !
èrgë_off£t
){

2141 
i
++;

2142 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*
i
 + 8, 
SEEK_SET
);

2143 
	`‰ód
(&
èrgë_off£t
, 8, 1, 
Â
);

2145 ++
i
, i < 
num_off_vÆues
; i++){

2146 if(
i
 == 1){

2147 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*(
i
-1Ë+ 8, 
SEEK_SET
);

2148 
	`‰ód
(&
ãmp_off£t
, 8, 1, 
Â
);

2150 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 120, 
SEEK_SET
);

2151 
	`fwrôe
(&
ãmp_off£t
, 8, 1, 
Â
);

2154 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*(
i
-1Ë+ 8, 
SEEK_SET
);

2155 
	`‰ód
(&
ãmp_off£t
, 8, 1, 
Â
);

2157 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*(
i
-2Ë+ 8, 
SEEK_SET
);

2158 
	`fwrôe
(&
ãmp_off£t
, 8, 1, 
Â
);

2164 
num_keys
--;

2166 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 12, 
SEEK_SET
);

2167 
	`fwrôe
(&
num_keys
, 4, 1, 
Â
);

2170 if(
is_Àaf
){

2171 
i
 = 
num_keys
; i < 
Àaf_‹dî
 - 1; i++){

2172 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 128*
i
 + 8);

2173 
	`fwrôe
(
NULL
, 1, 120, 
Â
);

2177 
i
 = 
num_keys
 + 1; i < 
öã∫Æ_‹dî
; i++){

2178 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*(
i
-1) + 8);

2179 
	`fwrôe
(
NULL
, 1, 8, 
Â
);

2183  
off£t
;

2184 
	}
}

2185 
öt64_t
 
	$adju°_roŸ_∑ge
(
öt64_t
 
Ω_off£t
){

2186 
öt64_t
 
√w_Ω_off£t
, 
p_off£t
 = 0;

2187 
num_keys
, 
is_Àaf
;

2191 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Ω_off£t
 + 12, 
SEEK_SET
);

2192 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

2194 if(
num_keys
 > 0)

2195  
Ω_off£t
;

2199 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Ω_off£t
 + 8, 
SEEK_SET
);

2200 
	`‰ód
(&
is_Àaf
 4, 1, 
Â
);

2202 if(!
is_Àaf
){

2205 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
Ω_off£t
 + 120, 
SEEK_SET
);

2206 
	`‰ód
(&
√w_Ω_off£t
, 8, 1, 
Â
);

2209 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√w_Ω_off£t
, 
SEEK_SET
);

2210 
	`fwrôe
(&
p_off£t
, 8, 1, 
Â
);

2213 
	`modify_hódî_∑ge
(
√w_Ω_off£t
);

2218 
√w_Ω_off£t
 = 0;

2220 
	`modify_hódî_∑ge
(
√w_Ω_off£t
);

2223  
√w_Ω_off£t
;

2224 
	}
}

2225 
öt64_t
 
	$cﬂÀs˚_∑ges
(
öt64_t
 
Ω_off£t
, i¡64_à
off£t
, i¡64_à
√ighb‹_off£t
, 
√ighb‹_ödex
, i¡64_à
k_¥ime
){

2226 
i
, 
j
, 
√ighb‹_ö£πi⁄_ödex
, 
off£t_íd
, 
is_Àaf
, 
num_keys
, 
√ighb‹_num_keys
;

2227 
öt64_t
 
tmp
, 
ãmp_key
, 
ãmp_off£t
, 
p_off£t
;

2228 
ãmp_vÆue
[120];

2231 if(
√ighb‹_ödex
 == -1){

2232 
tmp
 = 
off£t
;

2233 
off£t
 = 
√ighb‹_off£t
;

2234 
√ighb‹_off£t
 = 
tmp
;

2238 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 8, 
SEEK_SET
);

2239 
	`‰ód
(&
is_Àaf
, 4, 1, 
Â
);

2242 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√ighb‹_off£t
 + 12, 
SEEK_SET
);

2243 
	`‰ód
(&
√ighb‹_num_keys
, 4, 1, 
Â
);

2245 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 12, 
SEEK_SET
);

2246 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

2248 
√ighb‹_ö£πi⁄_ödex
 = 
√ighb‹_num_keys
;

2251 if(!
is_Àaf
){

2253 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√ighb‹_off£t
 + 128 + 16*(
√ighb‹_ö£πi⁄_ödex
), 
SEEK_SET
);

2254 
	`fwrôe
(&
k_¥ime
 8, 1, 
Â
);

2256 
√ighb‹_num_keys
++;

2258 
off£t_íd
 = 
num_keys
;

2260 
i
 = 
√ighb‹_ö£πi⁄_ödex
 + 1, 
j
 = 0; j < 
off£t_íd
; i++, j++){

2263 if(
j
 == 0){

2264 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 120, 
SEEK_SET
);

2265 
	`‰ód
(&
ãmp_off£t
, 8, 1, 
Â
);

2268 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*(
j
-1Ë+ 8, 
SEEK_SET
);

2269 
	`‰ód
(&
ãmp_off£t
, 8, 1, 
Â
);

2272 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*
j
, 
SEEK_SET
);

2273 
	`‰ód
(&
ãmp_key
, 8, 1, 
Â
);

2277 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√ighb‹_off£t
 + 128 + 16*(
i
-1Ë+ 8, 
SEEK_SET
);

2278 
	`fwrôe
(&
ãmp_off£t
, 8, 1, 
Â
);

2280 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√ighb‹_off£t
 + 128 + 16*
i
, 
SEEK_SET
);

2281 
	`fwπõ
(&
ãmp_key
, 8, 1, 
Â
);

2283 
√ighb‹_num_keys
++;

2284 
num_keys
--;

2287 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 16*(
j
-1Ë+ 8, 
SEEK_SET
);

2288 
	`‰ód
(&
ãmp_off£t
, 8, 1, 
Â
);

2290 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√ighb‹_off£t
 + 128 + 16*(
i
-1Ë+ 8, 
SEEK_SET
);

2291 
	`fwrôe
(&
ãmp_off£t
, 8, 1, 
Â
);

2295 
i
 = 0; i < 
√ighb‹_num_keys
 + 1; i++){

2296 if(
i
 == 0){

2297 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√ighb‹_off£t
 + 120, 
SEEK_SET
);

2298 
	`‰ód
(&
ãmp_off£t
, 8, 1, 
Â
);

2301 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√ighb‹_off£t
 + 128 + 16*(
i
-1Ë+ 8, 
SEEK_SET
);

2302 
	`‰ód
(&
ãmp_off£t
, 8, 1, 
Â
);

2306 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
ãmp_off£t
, 
SEEK_SET
);

2307 
	`fwrôe
(&
ãmp_off£t
, 8, 1, 
Â
);

2312 
i
 = 
√ighb‹_ö£πi⁄_ödex
, 
j
 = 0; j < 
num_keys
; i++, j++){

2314 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 128 + 
j
*128, 
SEEK_SET
);

2315 
	`‰ód
(&
ãmp_key
, 8, 1, 
Â
);

2316 
	`‰ód
(
ãmp_vÆue
, 1, 120, 
Â
);

2319 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√ighb‹_off£t
 + 128 + 
i
*128, 
SEEK_SET
);

2320 
	`fwrôe
(&
ãmp_key
, 8, 1, 
Â
);

2321 
	`fwrôe
(
ãmp_vÆue
, 1, 120 , 
Â
);

2324 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 120, 
SEEK_SET
);

2325 
	`‰ód
(&
ãmp_off£t
, 8, 1, 
Â
);

2326 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
√ighb‹_off£t
 + 120, 
SEEK_SET
);

2327 
	`fwrôe
(&
ãmp_off£t
, 8, 1, 
Â
);

2330 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
, 
SEEK_SET
);

2331 
	`‰ód
(&
p_off£t
, 8, 1, 
Â
);

2333 
	`dñëe_íåy
(
Ω_off£t
, 
p_off£t
, 
k_¥ime
, 
NULL
, 
off£t
);

2336 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
, 
SEEK_SET
);

2337 
	`fwrôe
(
NULL
, 1, 4096, 
Â
);

2338 
	`vacuum_usög_∑ge
(
off£t
);

2340  
Ω_off£t
;

2341 
	}
}

2342 
	$ªdi°ribuã_∑ges
(){

2344 
	}
}

2345 
öt64_t
 
	$dñëe_íåy_‰om_∑ge
(
öt64_t
 
Ω_off£t
, i¡64_à
off£t
, i¡64_à
key
, *
vÆue
, i¡64_à
key_off£t
){

2346 
mö_keys
, 
is_Àaf
, 
num_keys
, 
√ighb‹_num_keys
 ,
k_¥ime_ödex
, 
√ighb‹_ödex
;

2347 
öt64_t
 
k_¥ime
, 
√ighb‹_off£t
, 
p_off£t
;

2350 
off£t
 = 
	`ªmove_íåy_‰om_∑ge
(off£t, 
key
, 
vÆue
, 
key_off£t
);

2353 if(
off£t
 =
Ω_off£t
)

2354  
	`adju°_roŸ_∑ge
(
Ω_off£t
);

2360 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 8, 
SEEK_SET
);

2361 
	`‰ód
(&
is_Àaf
, 4, 1, 
Â
);

2362 
mö_keys
 = 
is_Àaf
 ? 
	`cut
(
Àaf_‹dî
 - 1Ë: cut(
öã∫Æ_‹dî
) - 1;

2366 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
 + 12, 
SEEK_SET
);

2367 
	`‰ód
(&
num_keys
, 4, 1, 
Â
);

2369 if(
num_keys
 >
mö_keys
)

2370  
Ω_off£t
;

2375 
√ighb‹_ödex
 = 
	`gë_√ighb‹_∑ge_ödex
(
off£t
);

2376 
k_¥ime_ödex
 = 
√ighb‹_ödex
 == -1 ? 0 :Çeighbor_index;

2381 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
off£t
, 
SEEK_SET
);

2382 
	`‰ód
(&
p_off£t
, 8, 1, 
Â
);

2384 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 128 + 16*
k_¥ime_ödex
, 
SEEK_SET
);

2385 
	`‰ód
(&
k_¥ime
, 8, 1, 
Â
);

2388 if(
√ighb‹_ödex
 == -1){

2389 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 128 + 8, 
SEEK_SET
);

2390 
	`‰ód
(&
√ighb‹_off£t
, 8, 1, 
Â
);

2393 if(
√ighb‹_ödex
 == 0){

2394 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 120);

2395 
	`‰ód
(&
√ighb‹_off£t
, 8, 1, 
Â
);

2398 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 
p_off£t
 + 128 + 16*(
√ighb‹_ödex
-1Ë+ 8, 
SEEK_SET
);

2399 
	`‰ód
(&
√ighb‹_off£t
, 8, 1, 
Â
);

2404 
ˇ∑côy
 = 
is_Àaf
 ? 
Àaf_‹dî
 : 
öã∫Æ_‹dî
 - 1;

2409 if(
√ighb‹_num_keys
 + 
num_keys
 < 
ˇ∑côy
)

2410  
	`cﬂÀs˚_∑ges
(
Ω_off£t
, 
off£t
, 
√ighb‹_off£t
, 
√ighb‹_ödex
, 
k_¥ime
);

2414  
	`ªdi°ribuã_∑ges
(
Ω_off£t
, 
off£t
, 
√ighb‹_off£t
, 
√ighb‹_ödex
, 
k_¥ime_ödex
, 
k_¥ime
);

2415 
	}
}

2420 
	$dñëe
(
öt64_t
 
key
){

2421 
key_vÆue
[120];

2422 
öt64_t
 
key_Àaf_off£t
, 
Ω_off£t
;

2425 
	`f£eko
(
Â
, 
deÁu…_off£t
 + 8, 
SEEK_SET
);

2426 
	`‰ód
(&
Ω_off£t
, 8, 1, 
Â
);

2428 
	`memmove
(
key_vÆue
, 
	`föd
(
key
), 120);

2429 
key_Àaf_off£t
 = 
	`föd_Àaf_∑ge
(
Ω_off£t
, 
key
);

2432 if(
key_vÆue
 !
NULL
 && 
key_Àaf_off£t
 != 0){

2433 
	`dñëe_íåy_‰om_∑ge
(
Ω_off£t
, 
key_Àaf_off£t
, 
key
, 
key_vÆue
, 0);

2438 
	}
}

	@main.c

1 
	~"b±.h
"

5 
	$maö
–
¨gc
, ** 
¨gv
 ) {

7 * 
öput_fûe
;

8 
FILE
 * 
Â
;

9 
node
 * 
roŸ
;

10 
öput
, 
ønge2
;

11 
ö°ru˘i⁄
;

12 
li˚n£_∑π
;

14 
roŸ
 = 
NULL
;

15 
vîbo£_ouçut
 = 
Ál£
;

17 i‡(
¨gc
 > 1) {

18 
‹dî
 = 
	`©oi
(
¨gv
[1]);

19 i‡(
‹dî
 < 
MIN_ORDER
 || ordî > 
MAX_ORDER
) {

20 
	`Ârötf
(
°dîr
, "InvÆid ordî: %d .\n\n", 
‹dî
);

21 
	`ußge_3
();

22 
	`exô
(
EXIT_FAILURE
);

26 
	`li˚n£_nŸi˚
();

27 
	`ußge_1
();

28 
	`ußge_2
();

30 i‡(
¨gc
 > 2) {

31 
öput_fûe
 = 
¨gv
[2];

32 
Â
 = 
	`f›í
(
öput_fûe
, "r");

33 i‡(
Â
 =
NULL
) {

34 
	`≥º‹
("Failure open input file.");

35 
	`exô
(
EXIT_FAILURE
);

37 !
	`„of
(
Â
)) {

38 
	`fsˇnf
(
Â
, "%d\n", &
öput
);

39 
roŸ
 = 
	`ö£π_åì
‘oŸ, 
öput
, input);

41 
	`f˛o£
(
Â
);

42 
	`¥öt_åì
(
roŸ
);

45 
	`¥ötf
("> ");

46 
	`sˇnf
("%c", &
ö°ru˘i⁄
Ë!
EOF
) {

47 
ö°ru˘i⁄
) {

49 
	`sˇnf
("%d", &
öput
);

50 
roŸ
 = 
	`dñëe_åì
‘oŸ, 
öput
);

51 
	`¥öt_åì
(
roŸ
);

54 
	`sˇnf
("%d", &
öput
);

55 
roŸ
 = 
	`ö£π_åì
‘oŸ, 
öput
, input);

56 
	`¥öt_åì
(
roŸ
);

60 
	`sˇnf
("%d", &
öput
);

61 
	`föd_™d_¥öt
(
roŸ
, 
öput
, 
ö°ru˘i⁄
 == 'p');

64 
	`sˇnf
("%d %d", &
öput
, &
ønge2
);

65 i‡(
öput
 > 
ønge2
) {

66 
tmp
 = 
ønge2
;

67 
ønge2
 = 
öput
;

68 
öput
 = 
tmp
;

70 
	`föd_™d_¥öt_ønge
(
roŸ
, 
öput
, 
ønge2
, 
ö°ru˘i⁄
 == 'p');

73 
	`¥öt_Àaves
(
roŸ
);

76 
	`gëch¨
() != ()'\n');

77  
EXIT_SUCCESS
;

80 
	`¥öt_åì
(
roŸ
);

83 
vîbo£_ouçut
 = !verbose_output;

86 i‡(
roŸ
)

87 
roŸ
 = 
	`de°roy_åì
(root);

88 
	`¥öt_åì
(
roŸ
);

91 
	`ußge_2
();

94 
	`gëch¨
() != ()'\n');

95 
	`¥ötf
("> ");

97 
	`¥ötf
("\n");

99  
EXIT_SUCCESS
;

100 
	}
}

	@
1
.
0
2
13
bpt.c
main.c
